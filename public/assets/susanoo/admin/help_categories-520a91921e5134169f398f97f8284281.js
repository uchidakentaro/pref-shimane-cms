(function(){var e,a;e=function(){function e(){}return e.prototype.init=function(){var e;return e="<img src='/assets/wakaba-e79b4a08b760c4341575c37eb667b63f.png' class='wakaba'/>",$("#treeview").fancytree({icons:!1,renderNode:function(a,t){var n,o,i,r;n=t.node,n.data&&(i=$(n.span).find(".fancytree-title"),i.length>0&&n.data.id&&(o=$(i).siblings(),r="<a class='delete-category' help_category_id='"+n.data.id+"' href='/susanoo/admin/help_categories/"+n.data.id+"'><i class='icon-remove-sign icon-white'></i></a>",$(o).is(".delete-category")||$(i).after(r),!0===n.data.navigation?$(o).is(".wakaba")||$(i).before(e):$(o).is(".wakaba")&&$(o).remove(".wakaba")))},source:$.ajax({url:"/susanoo/admin/help_categories/treeview"}),activate:function(){return function(e,a){var t,n;if(t=a.node,t.data.id)return n={},n.parent_id=t.data.id,$.get("/susanoo/admin/help_categories/new",n,function(e){return $("#center-form-area").html(e)})}}(),lazyload:function(e,a){var t;return t=a.node,a.result={url:"/susanoo/admin/help_categories/treeview",data:{id:t.data.id}}}}),$(document).on("ajax:success","#sort-help",function(e,a){return $("tbody#helps").html(a)}),$(document).on("click",".delete-category",function(e){return e.preventDefault,window.confirm("\u524a\u9664\u3057\u307e\u3059\u304b\uff1f")&&$.ajax({type:"DELETE",url:$(this).attr("href"),dataType:"script"}),!1}),$("tbody#helps").sortable({cursor:"move",opacity:.7,handle:".icon-align-justify",update:function(){return $.post("/susanoo/admin/helps/update_sort",$(this).sortable("serialize"),function(e){if(e)return $("tbody#helps").effect("highlight","",2e3)})}})},e}(),Susanoo.Admin||(Susanoo.Admin={}),(a=Susanoo.Admin).HelpCategory||(a.HelpCategory={}),Susanoo.Admin.HelpCategory.Index=new e}).call(this);